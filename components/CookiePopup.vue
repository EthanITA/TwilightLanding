<script lang="ts" setup>
import Button from '~/components/Button.vue';
import { useLocalStorage } from '@vueuse/core';

const consented = useLocalStorage<'consented' | 'declined' | undefined>('cookie-consent', undefined);
</script>

<template>
  <div v-if="!consented" class="fixed bottom-0 sm:right-0 sm:p-8">
    <div class="relative flex w-full flex-col rounded-xl border border-gray-200 bg-gray-50 p-6 shadow-md sm:w-96 sm:border-gray-100">
      <div class="absolute right-2 top-2 h-6 w-6 sm:right-4 sm:top-4">
        <svg fill="none" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M17.4571 9.22098C17.3476 9.13363 17.2199 9.07203 17.0834 9.04074C16.9468 9.00945 16.805 9.00928 16.6684 9.04024C16.3503 9.11202 16.0202 9.11177 15.7023 9.0395C15.3843 8.96723 15.0865 8.82477 14.8307 8.62255C14.5749 8.42033 14.3676 8.16346 14.2239 7.87076C14.0802 7.57806 14.0037 7.25692 14.0002 6.93086C13.999 6.68427 13.9006 6.4481 13.7262 6.27373C13.5519 6.09936 13.3157 6.0009 13.0691 5.99977C12.743 5.99621 12.4219 5.91978 12.1292 5.77607C11.8365 5.63236 11.5796 5.42502 11.3774 5.16921C11.1752 4.9134 11.0327 4.61561 10.9604 4.29764C10.8882 3.97966 10.8879 3.64955 10.9597 3.33147C10.9904 3.19445 10.9899 3.0523 10.9584 2.91548C10.9268 2.77867 10.8649 2.65068 10.7774 2.54094C10.6898 2.4312 10.5787 2.34252 10.4522 2.28142C10.3258 2.22031 10.1873 2.18836 10.0469 2.1879C10.0306 2.18782 10.0146 2.18774 9.99831 2.18774C8.45116 2.18803 6.93892 2.64768 5.65331 3.50843C4.3677 4.36918 3.36661 5.59227 2.77694 7.02264C2.18727 8.45302 2.03558 10.0263 2.3411 11.543C2.64661 13.0596 3.39558 14.4515 4.49305 15.542C5.59053 16.6325 6.98708 17.3726 8.50568 17.6685C10.0243 17.9644 11.5965 17.8027 13.0231 17.204C14.4497 16.6052 15.6664 15.5964 16.519 14.3053C17.3716 13.0143 17.8216 11.4992 17.8121 9.95203C17.8116 9.81134 17.7794 9.67257 17.718 9.54602C17.6565 9.41946 17.5674 9.30837 17.4571 9.22098ZM15.0777 15.0868C12.3142 17.8456 7.78907 17.8758 4.99064 15.1543C3.96501 14.1576 3.26005 12.8775 2.96596 11.4779C2.67186 10.0783 2.80201 8.62284 3.33974 7.29762C3.87748 5.9724 4.79834 4.83774 5.98454 4.0388C7.17073 3.23986 8.5683 2.81297 9.99846 2.81275C10.0133 2.81275 10.0283 2.81282 10.0432 2.8129C10.0906 2.81297 10.1375 2.82373 10.1802 2.84437C10.2229 2.86502 10.2604 2.89502 10.2899 2.93215C10.3192 2.96844 10.3398 3.01092 10.3502 3.05637C10.3606 3.10182 10.3605 3.14905 10.3499 3.19445C10.2577 3.60341 10.2581 4.02782 10.3511 4.4366C10.4441 4.84539 10.6273 5.22821 10.8873 5.55706C11.1473 5.8859 11.4776 6.15245 11.8539 6.33719C12.2302 6.52193 12.6431 6.62019 13.0623 6.62478C13.1452 6.62516 13.2245 6.65824 13.2831 6.71681C13.3417 6.77539 13.3748 6.85473 13.3752 6.93758C13.3798 7.35678 13.478 7.76964 13.6627 8.14597C13.8475 8.52229 14.114 8.85255 14.4428 9.11258C14.7717 9.37261 15.1545 9.55582 15.5632 9.64882C15.972 9.74182 16.3964 9.74224 16.8054 9.65006C16.8509 9.63952 16.8981 9.63946 16.9437 9.64987C16.9892 9.66029 17.0317 9.68091 17.0681 9.71018C17.1051 9.73957 17.135 9.77691 17.1556 9.81944C17.1762 9.86197 17.187 9.90859 17.1871 9.95585C17.1959 10.9086 17.0138 11.8535 16.6515 12.7347C16.2892 13.616 15.7541 14.4157 15.0777 15.0868ZM12.6294 12.9955C12.7168 13.0829 12.7764 13.1943 12.8005 13.3155C12.8246 13.4368 12.8122 13.5624 12.7649 13.6766C12.7176 13.7908 12.6375 13.8884 12.5347 13.9571C12.4319 14.0258 12.3111 14.0624 12.1875 14.0624C12.0639 14.0624 11.943 14.0258 11.8403 13.9571C11.7375 13.8884 11.6574 13.7908 11.6101 13.6766C11.5628 13.5624 11.5504 13.4368 11.5745 13.3155C11.5986 13.1943 11.6582 13.0829 11.7456 12.9955C11.8036 12.9375 11.8725 12.8914 11.9483 12.86C12.0241 12.8286 12.1054 12.8124 12.1875 12.8124C12.2696 12.8124 12.3508 12.8286 12.4267 12.86C12.5025 12.8914 12.5714 12.9375 12.6294 12.9955ZM7.62942 12.3705C7.71683 12.4579 7.77635 12.5693 7.80047 12.6905C7.82458 12.8118 7.81221 12.9374 7.7649 13.0516C7.7176 13.1658 7.63749 13.2634 7.53471 13.3321C7.43194 13.4008 7.3111 13.4374 7.18749 13.4374C7.06388 13.4374 6.94304 13.4008 6.84027 13.3321C6.73749 13.2634 6.65738 13.1658 6.61008 13.0516C6.56277 12.9374 6.5504 12.8118 6.57451 12.6905C6.59863 12.5693 6.65815 12.4579 6.74556 12.3705C6.80359 12.3125 6.87249 12.2664 6.94832 12.235C7.02414 12.2036 7.10541 12.1874 7.18749 12.1874C7.26956 12.1874 7.35084 12.2036 7.42666 12.235C7.50249 12.2664 7.57139 12.3125 7.62942 12.3705ZM7.00442 8.87938C6.91702 8.96678 6.80565 9.02631 6.68442 9.05042C6.56318 9.07454 6.43752 9.06216 6.32332 9.01486C6.20912 8.96755 6.11151 8.88745 6.04283 8.78467C5.97416 8.68189 5.9375 8.56105 5.9375 8.43744C5.9375 8.31383 5.97416 8.193 6.04283 8.09022C6.11151 7.98744 6.20912 7.90733 6.32332 7.86003C6.43752 7.81273 6.56318 7.80035 6.68442 7.82447C6.80565 7.84858 6.91702 7.9081 7.00442 7.99551C7.06246 8.05354 7.1085 8.12244 7.13992 8.19827C7.17133 8.27409 7.1875 8.35537 7.1875 8.43744C7.1875 8.51952 7.17133 8.60079 7.13992 8.67662C7.1085 8.75245 7.06246 8.82134 7.00442 8.87938ZM11.0669 9.24551C11.1543 9.33292 11.2139 9.44428 11.238 9.56552C11.2621 9.68675 11.2497 9.81242 11.2024 9.92662C11.1551 10.0408 11.075 10.1384 10.9722 10.2071C10.8694 10.2758 10.7486 10.3124 10.625 10.3124C10.5014 10.3124 10.3805 10.2758 10.2778 10.2071C10.175 10.1384 10.0949 10.0408 10.0476 9.92662C10.0003 9.81242 9.9879 9.68675 10.012 9.56552C10.0361 9.44428 10.0957 9.33292 10.1831 9.24551C10.2411 9.18747 10.31 9.14144 10.3858 9.11002C10.4616 9.07861 10.5429 9.06245 10.625 9.06245C10.7071 9.06245 10.7883 9.07861 10.8642 9.11002C10.94 9.14143 11.0089 9.18747 11.0669 9.24551Z"
            fill="#4B5563"
            stroke="#4B5563"
            style="
              fill: #4b5563;
              fill: color(display-p3 0.2941 0.3333 0.3882);
              fill-opacity: 1;
              stroke: #4b5563;
              stroke: color(display-p3 0.2941 0.3333 0.3882);
              stroke-opacity: 1;
            "
          />
        </svg>
      </div>
      <div>
        We use cookies to anonymously track statistics (ie. number of visitors) and to improve our website.
        <p>
          You can read our <a href="/cookie-policy" target="_blank">cookie policy</a> and
          <a href="/privacy-policy" target="_blank">privacy policy</a>
        </p>
      </div>
      <div class="-mb-2 -mr-2 ml-auto flex gap-2 sm:mt-2">
        <Button color="none" @click="() => (consented = 'declined')">Decline</Button>
        <Button color="primary" @click="() => (consented = 'consented')">Accept</Button>
      </div>
    </div>
  </div>
</template>

<style scoped>
a {
  @apply text-primary underline;
}
a:hover {
  @apply !text-primary/70;
}
</style>
